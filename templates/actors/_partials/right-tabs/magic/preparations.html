<!-- SPELLS -->
<div class="SRBlockSheet">
	<ul>
		<li class="SR-LigneEnTete grid">
			<div class="col-3 SR-TextUppercase">{{localize 'SR5.Preparations'}}</div>
			<div class="col-1 SR-TextCenter">{{localize 'SR5.DicePoolShort'}}</div>
			<div class="col-1">
				<div class="grid">
					<div class="col-6 SR-TextCenter">{{localize 'SR5.SpellForceShort'}}</div>
					<div class="col-6 SR-TextCenter">{{localize 'SR5.DiceHitsShort'}}</div>
				</div>
			</div>
			<div class="col-2 SR-TextCenter">{{localize 'SR5.PreparationPotency'}}</div>
			<div class="col-2 SR-TextCenter">{{localize 'SR5.PreparationTrigger'}}</div>
			<div class="col-1 SR-TextCenter">{{localize 'SR5.SpellRangeShort'}}</div>
			<div class="col-1 SR-TextCenter">{{localize 'SR5.SpellDurationAbbrev'}}</div>
			<div class="col-1">
				{{#if owner}}
				<p class="SR-TextRight add-item" data-helpTitle="{{localize 'SR5.HELP_ItemAdd' key=(findTranslation 'itemTypes' 'itemPreparation')}}" 
				  data-helpMessage="{{localize 'SR5.HELP_ItemAddMsg'}}">
					<a class="item-create" data-title="{{localize 'SR5.Add'}}" data-type="itemSpell"><em class="fas fa-plus"></em></a>
				</p>
				{{/if}}
			</div>
		</li>
		{{#each actor.preparations}}
		<li class="item grid" data-item-id="{{_id}}" draggable="true">
			<div class="col-3 deplie" data-helpTitle="{{localize 'SR5.HELP_MoreInfos'}}" data-helpMessage="{{localize 'SR5.HELP_MoreInfosMsg'}}">
				{{name}}
			</div>
			<div class="col-1 roll-logo SR-TextCenter sr-roll" data-rolltype="preparation"
			  	  data-helpTitle="{{localize 'SR5.DicePool'}}"
			  	  data-helpMessage="{{localize 'SR5.HELP_PreparationRollMsg'}}"
			  	  data-helpDetailsItem="data.test"
			  	  data-helpItemId="{{_id}}">
					{{data.test.dicePool}}
				</div>
			<div class="col-1">
				<div class="grid">
					<div class="col-6 SR-TextCenter changeValueByClick" data-binding="data.force" 
					  data-helpTitle="{{localize 'SR5.HELP_SpellForce' key=name}}"
					  data-helpMessage="{{localize 'SR5.HELP_PreparationForceMsg'}}">
					  	{{data.force}}
					</div>
					<div class="col-6 SR-TextCenter changeValueByClick" data-binding="data.hits" 
					  data-helpTitle="{{localize 'SR5.HELP_SpellHits' key=name}}"
					  data-helpMessage="{{localize 'SR5.HELP_PreparationHitsMsg'}}">
						{{data.hits}}
					</div>
				</div>
			</div>
			<div class="col-2 SR-TextCenter changeValueByClick" data-binding="data.potency"
			  data-helpTitle="{{localize 'SR5.HELP_Potency' key=name}}"
			  data-helpMessage="{{localize 'SR5.HELP_PotencyMsg'}}">
				{{data.potency}}
			</div>
			<div class="col-2 SR-TextCenter">{{findTranslation 'preparationTriggerTypes' data.trigger}}</div>
			<div class="col-1 SR-TextCenter">
				{{#if data.range}}
					{{findTranslation 'spellRangesShort' data.range}}
					{{#if_g data.spellAreaOfEffect.value "0"}}
						<span data-helpTitle="{{localize 'SR5.RangeArea'}}"
						  data-helpDetailsItem="data.spellAreaOfEffect"
						  data-helpItemId="{{_id}}">
							({{data.spellAreaOfEffect.value}} {{localize 'SR5.MeterUnit'}})
						</span>
					{{/if_g}}
				{{else}}-{{/if}}
			</div>
			<div class="col-1 SR-TextCenter">
				{{#if data.duration}}
					{{#ife data.duration "sustained"}}
						<a class="toggle-value" data-dtype="Boolean" data-item-id="{{_id}}" data-binding="data.isActive"
						  data-helpTitle="{{localize 'SR5.HELP_SpellSustain' key=name}}"
						  data-helpMessage="{{localize 'SR5.HELP_SpellSustainMsg'}}">
							<em class="fas fa-sm fa-praying-hands {{#if data.isActive}}SR-SubColor{{/if}}"></em>
						</a>
					{{else}}
						{{findTranslation 'spellDurationsShort' data.duration}}
					{{/ife}}
				{{else}}-{{/if}}
			</div>
			<div class="col-1 grid SR-TextRight">
				{{#if ../owner}}
				<a data-helpTitle="{{localize 'SR5.HELP_ItemManagement' key=name}}" data-helpMessage="{{localize 'SR5.HELP_ItemManagementMsg'}}">
					<em class="fas fa-sm fa-edit item-management"></em>
				</a>
				{{/if}}
			</div>
		</li>
		{{/each}}
	</ul>
</div>